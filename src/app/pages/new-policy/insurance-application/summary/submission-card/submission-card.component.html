<div class="d-flex flex-row justify-content-between">
  <div [formGroup]="applicationForm">
    <div class="border-radius-card paper-card w-100">
      <div class="d-flex justify-content-between">
        <div>
          <p class="body-medium-bold securian-pine-text-color">Application #{{ application().id }}</p>
          @if (insuranceType() !== 'Single Premium') {
            @let applicants = application().applicants;
            <span class="body-small-regular">
              {{ applicants[0].firstName }} {{ applicants[0].lastName }}
              {{ applicants.length > 1 ? ' & ' + applicants[1].firstName : '' }}
              {{ applicants.length > 1 ? applicants[1].lastName : '' }}
            </span>
          }
        </div>
        <div>
          @if (applicationStatus() !== 'Draft') {
            <div
              class="info-color"
              appTooltip
              [tooltip]="{
                tooltip: 'Application in ' + applicationStatus() + ' status',
                position: applicationIndex() % 2 === 0 ? 'top' : 'left',
                style: 'info',
              }"
              aria-label="details">
              <mat-icon>playlist_add_check</mat-icon>
            </div>
          }
        </div>
      </div>

      <div class="mt-3">
        <div class="mb-1">
          <span class="body-medium-bold">Forms Sign Date (mm/dd/yyyy)</span>
        </div>
        <mat-form-field appearance="outline" class="w-100">
          <input
            matInput
            type="text"
            formControlName="signDate_{{ application().id }}"
            placeholder="Enter forms sign date"
            [matDatepicker]="pickerFundingDate"
            (dateChange)="
              updateFormsSignatureDate($event.value, application().id ? application().id?.toString() : '0')
            " />
          <mat-datepicker-toggle matSuffix [for]="pickerFundingDate"> </mat-datepicker-toggle>
          <mat-datepicker #pickerFundingDate></mat-datepicker>
        </mat-form-field>
      </div>

      <div class="d-flex justify-content-between paperwork-frame paperwork-frame-border-frame item-center">
        <div class="d-flex align-items-center">
          <div class="pdf-icon"></div>
          <div class="insurance-paperwork">
            <span class="body-small-regular">Insurance Paperwork</span>
          </div>
        </div>
        <div style="margin-left: 8px">
          <button
            mat-icon-button
            [disabled]="!enableDownloadFile()"
            color="primary"
            [style.cursor]="enableCursorLocal ? 'pointer' : 'not-allowed'">
            <mat-icon
              (click)="downloadFile('InsuranceForm', false)"
              class="valeyo-color"
              [style.pointer-events]="enableCursorLocal ? 'auto' : 'none'"
              >save_alt</mat-icon
            >
          </button>
        </div>
      </div>
      @if (applicationStatus() === 'Submitted' && insuranceType() !== 'Single Premium' && showSupportingPaperwork()) {
        <div class="d-flex justify-content-between paperwork-frame paperwork-frame-border-frame item-center mt-3">
          <div class="d-flex align-items-center">
            <div class="pdf-icon"></div>
            <div class="insurance-paperwork">
              <span class="body-small-regular">Supporting Paperwork</span>
            </div>
          </div>
          <div style="margin-left: 8px">
            <button mat-icon-button [disabled]="false" color="primary">
              <mat-icon (click)="downloadFile('SupplementalForm', false)" class="green-icon" style="cursor: pointer"
                >save_alt</mat-icon
              >
            </button>
          </div>
        </div>
      }
    </div>
  </div>
</div>
